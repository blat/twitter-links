<% # encoding: UTF-8 %>

<% if @links.empty? %>
    <p>No result found. Please come back later!</p>

<% else %>

    <% @links.each do |link| %>
    <article class="well">
        <span class="pull-right label"><%= ago(link.date) %></span>
        <h3>
            <img src="<%= link.favicon %>" />
            <a data-toggle="modal" data-target="#<%= link.id %>" href="<%= link.url %>">
                <%= link.title %>
            </a>
            <% link.tags.each do |tag| %>
                <span class="label label-info"><%= tag %></span>
            <% end %>
        </h3>
        <p>
            <%= link.summary %>
        </p>
        <div class="modal hide" id="<%= link.id %>">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>
                    <img src="<%= link.favicon %>" />
                    <a href="<%= link.url %>" target="_blank"><%= link.title %></a>
                </h3>
            </div>
            <div class="modal-body">
                <p><%= link.content %></p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn pull-right" data-dismiss="modal">Close</a>
            </div>
        </div>
    </article>
    <% end %>

    <div class="pagination pagination-centered">
        <ul>
            <% if @page > 1 then %>
                <li><a href="/links/1">&laquo;</a></li>
                <li><a href="/links/<%= @page-1 %>">&lsaquo;</a></li>
            <% end %>
            <% for page in [1,@page-5].max..[@pages,@page+5].min do %>
                <% if page == @page then %>
                    <li class="active"><a href="/links/<%= page %>"><%= page %></a></li>
                <% else %>
                    <li><a href="/links/<%= page %>"><%= page %></a></li>
                <% end %>
            <% end %>
            <% if @page < @pages then %>
                <li><a href="/links/<%= @page+1 %>">&rsaquo;</a></li>
                <li><a href="/links/<%= @pages %>">&raquo;</a></li>
            <% end %>
        </ul>
    </div>
<% end %>
